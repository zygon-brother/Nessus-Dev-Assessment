{"version":3,"sources":["tests.js"],"names":["test","require","request","server","controller","beforeEach","t","start","setTestVals","plan","res","get","set","console","log","JSON","stringify","text","hosts","parse","is","status","id","length"],"mappings":";;;;AAAA,MAAMA,OAAOC,QAAQ,KAAR,CAAb;AACA,MAAMC,UAAUD,QAAQ,WAAR,CAAhB;AACA,MAAME,SAASF,QAAQ,WAAR,CAAf;AACA,MAAMG,aAAaH,QAAQ,gBAAR,CAAnB;;AAEAD,KAAKK,UAAL,CAAgBC,KAAK;AACpBH,UAASI,KAAT;AACA,CAFD;;AAIAP,KAAK,mBAAL;AAAA,8BAA0B,WAAMM,CAAN,EAAW;AACpCF,aAAWI,WAAX,CACG;AACC,YAAS,CACL;AACF,UAAM,CADJ;AAEF,YAAQ,uBAFN;AAGF,YAAQ;AAHN,IADK;AADV,GADH;;AAaAF,IAAEG,IAAF,CAAO,CAAP;;AAEA,QAAMC,MAAM,MAAMR,QAAQ,uBAAR,EACbS,GADa,CACT,QADS,EAEbC,GAFa,CAET,QAFS,EAEC,kBAFD,CAAlB;;AAIGC,UAAQC,GAAR,CAAYC,KAAKC,SAAL,CAAeN,IAAIO,IAAnB,CAAZ;AACH,MAAIC,QAAQH,KAAKI,KAAL,CAAWT,IAAIO,IAAf,CAAZ;;AAEAX,IAAEc,EAAF,CAAKV,IAAIW,MAAT,EAAiB,GAAjB;AACAf,IAAEc,EAAF,CAAKF,MAAM,CAAN,EAASI,EAAd,EAAkB,CAAlB;AACAhB,IAAEc,EAAF,CAAKF,MAAMK,MAAX,EAAmB,CAAnB;AACA,EA1BD;;AAAA;AAAA;AAAA;AAAA","file":"tests.js","sourcesContent":["const test = require('ava');\r\nconst request = require('supertest');\r\nconst server = require('../server');\r\nconst controller = require('../controllers');\r\n\r\ntest.beforeEach(t => {\r\n\tserver().start();\r\n});\r\n\r\ntest('A first unit test', async t => {\r\n\tcontroller.setTestVals(\r\n\t   {\r\n\t\t   \"hosts\": [\r\n\t\t       {\r\n\t\t\t\t   \"id\": 1,\r\n\t\t\t\t   \"name\": \"localhost.localdomain\",\r\n\t\t\t\t   \"ipv4\": \"127.0.0.1\"\r\n\t\t       }\r\n\t\t  \r\n\t\t   ]\r\n\t   }\r\n\t);\r\n\t\r\n\tt.plan(3);\r\n\t\r\n\tconst res = await request('http://localhost:8080')\r\n\t    .get('/hosts')\r\n\t    .set('Accept', 'application/json')\r\n\t\r\n    console.log(JSON.stringify(res.text));\r\n\tvar hosts = JSON.parse(res.text);\r\n    \r\n\tt.is(res.status, 200);\r\n\tt.is(hosts[0].id, 1);\r\n\tt.is(hosts.length, 1);\r\n});"]}